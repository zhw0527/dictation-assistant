# 🔧 项目配置检查清单

## ✅ 已修复：AppID 配置

### 问题
- 之前使用的是 `touristappid`（游客模式）
- 游客模式下某些 API 功能受限

### 解决方案
- ✅ 已更新为真实 AppID：`wxa697c9e737f7df2d`

---

## 📋 配置检查步骤

### 1. 在微信开发者工具中检查 AppID

1. **关闭当前项目**
   - 点击左上角关闭按钮

2. **重新打开项目**
   - 微信开发者工具 → 打开项目
   - 选择项目目录：`/Users/zhouwen/Documents/听写助理`

3. **确认 AppID**
   - 应该显示：`wxa697c9e737f7df2d`
   - 如果还是显示"游客模式"或"测试号"，请手动修改

4. **手动修改 AppID（如果需要）**
   - 详情 → 基本信息
   - AppID 栏位
   - 输入：`wxa697c9e737f7df2d`
   - 点击确定

---

### 2. 配置本地设置

在"详情" → "本地设置"中确认：

- ✅ 不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书
- ✅ 不校验安全域名
- ⚠️ ES6 转 ES5（建议开启）
- ⚠️ 增强编译（建议开启）

---

### 3. 配置服务器域名（正式上线前）

登录微信公众平台：https://mp.weixin.qq.com/

**开发 → 开发管理 → 开发设置 → 服务器域名**

**request 合法域名**：
```
https://aip.baidubce.com
https://tsn.baidu.com
```

**注意**：
- 开发阶段可以勾选"不校验合法域名"
- 正式发布前必须配置

---

## 🧪 验证配置

### 测试 AppID 是否生效

1. **查看控制台**
   - 不应该再看到"游客模式"提示
   - 如果还有，重启开发者工具

2. **测试 API 调用**
   - 进入测试页面：`pages/test/test`
   - 测试 TTS 功能
   - 测试 OCR 功能

3. **查看网络请求**
   - 打开 Network 面板
   - 查看 API 请求是否成功

---

## 📝 配置文件说明

### project.config.json

```json
{
  "appid": "wxa697c9e737f7df2d",  // ✅ 真实 AppID
  "projectname": "听写助理",
  "libVersion": "2.19.4",
  "setting": {
    "urlCheck": true,  // 开发时可改为 false
    "es6": true,
    "postcss": true,
    "minified": true
  }
}
```

### config.js

```javascript
const config = {
  wechat: {
    appId: 'wxa697c9e737f7df2d',  // ✅ 真实 AppID
    appSecret: '991429e924552c63a5d23d8486b12121'
  }
}
```

---

## ⚠️ 常见问题

### 1. 修改后还是显示游客模式

**解决方法**：
1. 完全关闭微信开发者工具
2. 删除项目缓存
3. 重新打开项目
4. 重新输入 AppID

### 2. AppID 无效

**检查**：
- AppID 是否正确：`wxa697c9e737f7df2d`
- 是否有权限使用该 AppID
- 登录的微信账号是否是该小程序的开发者

### 3. API 调用失败

**检查**：
- 是否勾选"不校验合法域名"
- 网络是否正常
- API Key 是否正确

---

## 🎯 验证清单

配置完成后，请验证：

- [ ] AppID 显示为 `wxa697c9e737f7df2d`
- [ ] 不再显示"游客模式"提示
- [ ] TTS 语音合成成功
- [ ] OCR 文字识别成功
- [ ] 网络请求正常
- [ ] 控制台无错误（除了 webapi_getwxaasyncsecinfo）

---

## 🚀 下一步

配置完成后：

1. **重启开发者工具**
   - 确保配置生效

2. **清除缓存**
   - 工具栏 → 清缓存
   - 清除全部缓存

3. **重新编译**
   - 点击"编译"按钮

4. **测试功能**
   - 测试所有核心功能
   - 确认无错误

---

## 📞 如果还有问题

1. **查看详细错误**
   - 控制台 → Console
   - 查看完整错误信息

2. **检查账号权限**
   - 登录 https://mp.weixin.qq.com/
   - 确认账号是该小程序的开发者

3. **联系支持**
   - 微信开放社区
   - GitHub Issues

---

**更新时间**: 2026-02-12  
**AppID**: wxa697c9e737f7df2d  
**状态**: ✅ 已配置
